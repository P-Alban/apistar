<pre class="highlight javascript {% if not is_selected %}hide{% endif %}" data-language="javascript"><code>var url = new URL("{{ link.url }}");
var options = {
    method: "{{ link.method }}"
};
{% if link.get_query_fields() %}url.search = new URLSearchParams({
{% for field in link.get_query_fields() %}    {{ field.name }}: ...{% if not loop.last %},{% endif %}
{% endfor %}});{% endif %}

fetch(url, options).then(function(response) {
    if (!response.ok) {
        throw new Error(response.statusText);
    }
    console.log(response.json());
})
</code></pre>
